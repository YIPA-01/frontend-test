import{B as w,k as N,e as V,c as B,o as c,w as o,a as l,b as r,u as s,l as n,t as d,m as C,d as p,i as k,n as b,p as j}from"./main-C-AdL_Rw.js";import{b as g}from"./useToast-z_lxE8aI.js";import{_ as E}from"./Card-DIPXIyi8.js";import{_ as U,a as h}from"./CardTitle-CxEe110n.js";import{_ as A}from"./CardContent-BWHkBFPf.js";import{_ as F}from"./CardFooter-DDXoFUIJ.js";import{_ as y,a as $}from"./Label-uL5Af5rS.js";import{_ as M}from"./Switch-CQ1H5Pa1.js";import{_ as q}from"./SkillLevel-CjLaOZeX.js";const z={class:"space-y-2"},D={key:0,class:"text-sm text-destructive"},L={class:"space-y-4"},O={class:"flex items-center justify-between"},R={class:"text-sm text-muted-foreground"},T={class:"grid gap-4"},G={key:0,class:"text-sm text-destructive"},H={class:"space-y-4"},I={class:"flex items-center justify-between space-x-2"},J={class:"space-y-0.5"},K={key:0,class:"text-sm text-destructive"},te={__name:"Form",props:{mode:{type:String,required:!0,validator:u=>["create","edit"].includes(u)},skill:{type:Object,default:()=>({name:"",level:"",is_visible:!0})}},setup(u){const m=u,_=w(),x=j(),a=N({name:m.skill.name||"",level:String(m.skill.level||""),is_visible:!!(m.skill.is_visible??!0)}),t=V({}),v=V(!1),S=async()=>{var f,e;v.value=!0,t.value={};try{m.mode==="create"?(await x.post("/admin/skills",a),console.log("Skill created successfully"),_.push("/admin/skills")):(await x.put(`/admin/skills/${m.skill.id}`,a),console.log("Skill updated successfully"),_.push("/admin/skills"))}catch(i){console.error("Form submission error:",i),(e=(f=i.response)==null?void 0:f.data)!=null&&e.errors&&(t.value=i.response.data.errors)}finally{v.value=!1}};return(f,e)=>(c(),B(s(E),null,{default:o(()=>[l(s(U),null,{default:o(()=>[l(s(h),null,{default:o(()=>[n(d(u.mode==="create"?"Add New Skill":"Edit Skill"),1)]),_:1})]),_:1}),r("form",{onSubmit:C(S,["prevent"])},[l(s(A),{class:"space-y-6"},{default:o(()=>[r("div",z,[l(s(y),{for:"name"},{default:o(()=>e[4]||(e[4]=[n("Name")])),_:1,__:[4]}),l(s($),{id:"name",modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=i=>a.name=i),type:"text",placeholder:"Enter skill name",class:b({"border-destructive ring-destructive":t.value.name})},null,8,["modelValue","class"]),t.value.name?(c(),p("p",D,d(t.value.name[0]),1)):k("",!0)]),r("div",L,[r("div",O,[l(s(y),{for:"level"},{default:o(()=>e[5]||(e[5]=[n("Level")])),_:1,__:[5]}),r("span",R,d(a.level)+"%",1)]),r("div",T,[l(s($),{id:"level",modelValue:a.level,"onUpdate:modelValue":e[1]||(e[1]=i=>a.level=i),type:"text",inputmode:"numeric",pattern:"[0-9]*",placeholder:"Enter skill level (0-100)",class:b({"ring-destructive":t.value.level})},null,8,["modelValue","class"]),l(s(q),{level:Number(a.level)||0,className:"w-full"},null,8,["level"])]),t.value.level?(c(),p("p",G,d(t.value.level[0]),1)):k("",!0)]),r("div",H,[r("div",I,[r("div",J,[l(s(y),{for:"is_visible"},{default:o(()=>e[6]||(e[6]=[n("Visibility")])),_:1,__:[6]}),e[7]||(e[7]=r("p",{class:"text-sm text-muted-foreground"}," Make this skill visible on your portfolio ",-1))]),l(s(M),{id:"is_visible",modelValue:a.is_visible,"onUpdate:modelValue":e[2]||(e[2]=i=>a.is_visible=i),class:b({"ring-destructive":t.value.is_visible})},null,8,["modelValue","class"])]),t.value.is_visible?(c(),p("p",K,d(t.value.is_visible[0]),1)):k("",!0)])]),_:1}),l(s(F),{class:"flex justify-end space-x-2"},{default:o(()=>[l(s(g),{type:"button",variant:"outline",onClick:e[3]||(e[3]=i=>s(_).push("/admin/skills"))},{default:o(()=>e[8]||(e[8]=[n(" Cancel ")])),_:1,__:[8]}),l(s(g),{type:"submit",disabled:v.value},{default:o(()=>[n(d(u.mode==="create"?"Create Skill":"Update Skill"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1}))}};export{te as _};
