import{f as P,x as U,y as A,o as i,d as w,z as S,e as c,A as z,c as V,w as b,B as D,C as E,i as y,b as l,t as C,u as p,m as G,a,l as B,n as M}from"./main-C-AdL_Rw.js";import{G as T}from"./GuestLayout-DLryM7gi.js";import{_ as L,a as q,b as R}from"./InputError-XFDQwJ7e.js";import{P as j}from"./PrimaryButton-DxZImuD_.js";import"./useToast-z_lxE8aI.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const F=["value"],I={__name:"Checkbox",props:{checked:{type:[Array,Boolean],required:!0},value:{default:null}},emits:["update:checked"],setup(f,{emit:g}){const m=g,v=f,n=P({get(){return v.checked},set(u){m("update:checked",u)}});return(u,s)=>U((i(),w("input",{type:"checkbox",value:f.value,"onUpdate:modelValue":s[0]||(s[0]=r=>n.value=r),class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,8,F)),[[A,n.value]])}},H={key:0,class:"mb-4 text-sm font-medium text-green-600"},J={key:1,class:"mb-4 text-sm font-medium text-red-600"},K={class:"mt-4"},O={class:"mt-4 block"},Q={class:"flex items-center"},W={class:"mt-4 flex items-center justify-end"},te={__name:"Login",setup(f){const g=D(),m=z(),{login:v,loading:n,error:u}=S(),s=c({email:"",password:"",remember:!1}),r=c({}),k=c(m.query.status||""),$=c(!0),N=async()=>{var _,e,d,o,x;r.value={};try{console.log("Starting login process...");const t=await v({email:s.value.email,password:s.value.password,remember:s.value.remember});console.log("Login response:",t),console.log("Current user after login:",t.user),console.log("Is admin:",(_=t.user)==null?void 0:_.is_admin);const h=m.query.redirect||"/admin/dashboard";console.log("Redirecting to:",h),g.push(h)}catch(t){console.error("Login error:",t),s.value.password="",(d=(e=t.response)==null?void 0:e.data)!=null&&d.errors?r.value=t.response.data.errors:r.value.general=((x=(o=t.response)==null?void 0:o.data)==null?void 0:x.message)||"Login failed"}};return(_,e)=>{const d=E("router-link");return i(),V(T,null,{default:b(()=>[k.value?(i(),w("div",H,C(k.value),1)):y("",!0),p(u)?(i(),w("div",J,C(p(u)),1)):y("",!0),l("form",{onSubmit:G(N,["prevent"])},[l("div",null,[a(L,{for:"email",value:"Email"}),a(q,{id:"email",type:"email",class:"mt-1 block w-full",modelValue:s.value.email,"onUpdate:modelValue":e[0]||(e[0]=o=>s.value.email=o),required:"",autofocus:"",autocomplete:"username"},null,8,["modelValue"]),a(R,{class:"mt-2",message:r.value.email},null,8,["message"])]),l("div",K,[a(L,{for:"password",value:"Password"}),a(q,{id:"password",type:"password",class:"mt-1 block w-full",modelValue:s.value.password,"onUpdate:modelValue":e[1]||(e[1]=o=>s.value.password=o),required:"",autocomplete:"current-password"},null,8,["modelValue"]),a(R,{class:"mt-2",message:r.value.password},null,8,["message"])]),l("div",O,[l("label",Q,[a(I,{name:"remember",checked:s.value.remember,"onUpdate:checked":e[2]||(e[2]=o=>s.value.remember=o)},null,8,["checked"]),e[3]||(e[3]=l("span",{class:"ms-2 text-sm text-gray-600"},"Remember me",-1))])]),l("div",W,[$.value?(i(),V(d,{key:0,to:"/forgot-password",class:"rounded-md text-sm text-gray-600 underline hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},{default:b(()=>e[4]||(e[4]=[B(" Forgot your password? ")])),_:1,__:[4]})):y("",!0),a(j,{class:M(["ms-4",{"opacity-25":p(n)}]),disabled:p(n)},{default:b(()=>e[5]||(e[5]=[B(" Log in ")])),_:1,__:[5]},8,["class","disabled"])])],32)]),_:1})}}};export{te as default};
