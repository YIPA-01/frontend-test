import{e as V,g as B,c as p,w as t,p as z,E,o as n,b as o,a as l,u as s,l as d,d as _,i as k,F as $,k as w,t as f}from"./main-DMTM8Wa_.js";import{_ as T}from"./AdminLayout-Fu1qM4yp.js";import{d as y}from"./useToast-BLslXrnO.js";import{_ as D}from"./Card-D5AGT6Za.js";import{_ as I,a as L}from"./CardTitle-DCQt_76P.js";import{_ as M}from"./CardContent-BLB1B4ZM.js";import{_ as S,a as H,b as h,c as v,d as R,e as m}from"./TableCell-1Qjsh73f.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"flex items-center justify-between"},G={class:"container py-6"},J={key:0,class:"flex justify-center py-8"},K={class:"font-medium"},O={class:"text-sm text-muted-foreground truncate max-w-xs"},Q={class:"flex flex-wrap gap-1"},U={key:0,class:"inline-flex items-center rounded-full bg-muted px-2 py-1 text-xs text-muted-foreground"},W={class:"flex items-center gap-2"},X={key:0,class:"flex -space-x-2"},Y=["src","alt"],Z={class:"text-sm text-muted-foreground"},ee={class:"flex items-center justify-end gap-2"},ue={__name:"Index",setup(te){const C=E(),b=z(),x=V(!1),u=V([]),j=async()=>{x.value=!0;try{const a=await b.get("/admin/projects");u.value=a.data}catch(a){console.error("Failed to load projects:",a)}finally{x.value=!1}},N=async a=>{if(confirm("Are you sure you want to delete this project?"))try{await b.delete(`/admin/projects/${a}`),u.value=u.value.filter(e=>e.id!==a)}catch(e){console.error("Failed to delete project:",e)}},F=async a=>{try{const e={...a,is_visible:!a.is_visible};await b.put(`/admin/projects/${a.id}`,e);const i=u.value.findIndex(r=>r.id===a.id);i!==-1&&(u.value[i]={...u.value[i],is_visible:!u.value[i].is_visible})}catch(e){console.error("Failed to update project visibility:",e)}};return B(()=>{j()}),(a,e)=>(n(),p(T,null,{header:t(()=>[o("div",q,[e[2]||(e[2]=o("h2",{class:"text-xl font-semibold text-foreground"},"Projects Management",-1)),l(s(y),{onClick:e[0]||(e[0]=i=>s(C).push("/admin/projects/create"))},{default:t(()=>e[1]||(e[1]=[d(" Add New Project ")])),_:1,__:[1]})])]),default:t(()=>[o("div",G,[l(s(D),null,{default:t(()=>[l(s(I),null,{default:t(()=>[l(s(L),null,{default:t(()=>e[3]||(e[3]=[d("Projects")])),_:1,__:[3]})]),_:1}),l(s(M),null,{default:t(()=>[x.value?(n(),_("div",J,e[4]||(e[4]=[o("div",{class:"text-sm text-muted-foreground"},"Loading projects...",-1)]))):(n(),p(s(S),{key:1},{default:t(()=>[l(s(H),null,{default:t(()=>[l(s(h),null,{default:t(()=>[l(s(v),null,{default:t(()=>e[5]||(e[5]=[d("Title")])),_:1,__:[5]}),l(s(v),null,{default:t(()=>e[6]||(e[6]=[d("Technologies")])),_:1,__:[6]}),l(s(v),null,{default:t(()=>e[7]||(e[7]=[d("Images")])),_:1,__:[7]}),l(s(v),null,{default:t(()=>e[8]||(e[8]=[d("Visibility")])),_:1,__:[8]}),l(s(v),{class:"text-right"},{default:t(()=>e[9]||(e[9]=[d("Actions")])),_:1,__:[9]})]),_:1})]),_:1}),l(s(R),null,{default:t(()=>[(n(!0),_($,null,w(u.value,i=>(n(),p(s(h),{key:i.id},{default:t(()=>[l(s(m),null,{default:t(()=>[o("div",null,[o("div",K,f(i.title),1),o("div",O,f(i.description),1)])]),_:2},1024),l(s(m),null,{default:t(()=>{var r,c;return[o("div",Q,[(n(!0),_($,null,w((r=i.technologies)==null?void 0:r.slice(0,3),g=>(n(),_("span",{key:g,class:"inline-flex items-center rounded-full bg-primary/10 px-2 py-1 text-xs text-primary"},f(g),1))),128)),((c=i.technologies)==null?void 0:c.length)>3?(n(),_("span",U," +"+f(i.technologies.length-3),1)):k("",!0)])]}),_:2},1024),l(s(m),null,{default:t(()=>{var r,c,g;return[o("div",W,[((r=i.images)==null?void 0:r.length)>0?(n(),_("div",X,[(n(!0),_($,null,w(i.images.slice(0,3),(P,A)=>(n(),_("img",{key:P.id,src:P.url,alt:`Project image ${A+1}`,class:"h-8 w-8 rounded-full border-2 border-background object-cover"},null,8,Y))),128))])):k("",!0),o("span",Z,f(((c=i.images)==null?void 0:c.length)||0)+" image"+f(((g=i.images)==null?void 0:g.length)!==1?"s":""),1)])]}),_:2},1024),l(s(m),null,{default:t(()=>[l(s(y),{size:"sm",variant:i.is_visible?"outline":"ghost",onClick:r=>F(i)},{default:t(()=>[d(f(i.is_visible?"Visible":"Hidden"),1)]),_:2},1032,["variant","onClick"])]),_:2},1024),l(s(m),{class:"text-right"},{default:t(()=>[o("div",ee,[l(s(y),{variant:"ghost",size:"sm",onClick:r=>s(C).push(`/admin/projects/${i.id}/edit`)},{default:t(()=>e[10]||(e[10]=[d(" Edit ")])),_:2,__:[10]},1032,["onClick"]),l(s(y),{variant:"destructive",size:"sm",onClick:r=>N(i.id)},{default:t(()=>e[11]||(e[11]=[d(" Delete ")])),_:2,__:[11]},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128)),u.value.length===0&&!x.value?(n(),p(s(h),{key:0},{default:t(()=>[l(s(m),{colspan:"5",class:"h-24 text-center text-muted-foreground"},{default:t(()=>e[12]||(e[12]=[d(" No projects found. Start by adding a new project. ")])),_:1,__:[12]})]),_:1})):k("",!0)]),_:1})]),_:1}))]),_:1})]),_:1})])]),_:1}))}};export{ue as default};
