import{e as $,g as S,c as m,w as l,p as N,B as V,o as d,b as r,a as s,u as t,l as n,d as g,i as B,F,j,t as x}from"./main-C-AdL_Rw.js";import{_ as A}from"./AdminLayout-BdNPaw2Z.js";import{b as v}from"./useToast-z_lxE8aI.js";import{_ as z}from"./Card-DIPXIyi8.js";import{_ as L,a as D}from"./CardTitle-CxEe110n.js";import{_ as E}from"./CardContent-BWHkBFPf.js";import{_ as M,a as H,b as y,c,d as I,e as u}from"./TableCell-BPjz1otV.js";import{_ as R}from"./SkillLevel-CjLaOZeX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"flex items-center justify-between"},q={class:"container py-6"},G={key:0,class:"flex justify-center py-8"},J={class:"flex items-center justify-end gap-2"},ee={__name:"Index",setup(K){const k=V(),p=N(),_=$(!1),o=$([]),b=async()=>{_.value=!0;try{const a=await p.get("/admin/skills");o.value=a.data}catch(a){console.error("Failed to load skills:",a)}finally{_.value=!1}},w=async a=>{if(confirm("Are you sure you want to delete this skill?"))try{await p.delete(`/admin/skills/${a}`),o.value=o.value.filter(e=>e.id!==a)}catch(e){console.error("Failed to delete skill:",e)}},C=async a=>{try{const e={...a,is_visible:!a.is_visible};await p.put(`/admin/skills/${a.id}`,e);const i=o.value.findIndex(f=>f.id===a.id);i!==-1&&(o.value[i]={...o.value[i],is_visible:!o.value[i].is_visible})}catch(e){console.error("Failed to update skill visibility:",e)}};return S(()=>{b()}),(a,e)=>(d(),m(A,null,{header:l(()=>[r("div",T,[e[2]||(e[2]=r("h2",{class:"text-xl font-semibold text-foreground"},"Skills Management",-1)),s(t(v),{onClick:e[0]||(e[0]=i=>t(k).push("/admin/skills/create"))},{default:l(()=>e[1]||(e[1]=[n(" Add New Skill ")])),_:1,__:[1]})])]),default:l(()=>[r("div",q,[s(t(z),null,{default:l(()=>[s(t(L),null,{default:l(()=>[s(t(D),null,{default:l(()=>e[3]||(e[3]=[n("Skills")])),_:1,__:[3]})]),_:1}),s(t(E),null,{default:l(()=>[_.value?(d(),g("div",G,e[4]||(e[4]=[r("div",{class:"text-sm text-muted-foreground"},"Loading skills...",-1)]))):(d(),m(t(M),{key:1},{default:l(()=>[s(t(H),null,{default:l(()=>[s(t(y),null,{default:l(()=>[s(t(c),null,{default:l(()=>e[5]||(e[5]=[n("Name")])),_:1,__:[5]}),s(t(c),null,{default:l(()=>e[6]||(e[6]=[n("Level")])),_:1,__:[6]}),s(t(c),null,{default:l(()=>e[7]||(e[7]=[n("Visibility")])),_:1,__:[7]}),s(t(c),{class:"text-right"},{default:l(()=>e[8]||(e[8]=[n("Actions")])),_:1,__:[8]})]),_:1})]),_:1}),s(t(I),null,{default:l(()=>[(d(!0),g(F,null,j(o.value,i=>(d(),m(t(y),{key:i.id},{default:l(()=>[s(t(u),null,{default:l(()=>[n(x(i.name),1)]),_:2},1024),s(t(u),null,{default:l(()=>[s(t(R),{level:i.level},null,8,["level"])]),_:2},1024),s(t(u),null,{default:l(()=>[s(t(v),{size:"sm",variant:i.is_visible?"outline":"ghost",onClick:f=>C(i)},{default:l(()=>[n(x(i.is_visible?"Visible":"Hidden"),1)]),_:2},1032,["variant","onClick"])]),_:2},1024),s(t(u),{class:"text-right"},{default:l(()=>[r("div",J,[s(t(v),{variant:"ghost",size:"sm",onClick:f=>t(k).push(`/admin/skills/${i.id}/edit`)},{default:l(()=>e[9]||(e[9]=[n(" Edit ")])),_:2,__:[9]},1032,["onClick"]),s(t(v),{variant:"destructive",size:"sm",onClick:f=>w(i.id)},{default:l(()=>e[10]||(e[10]=[n(" Delete ")])),_:2,__:[10]},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128)),o.value.length===0&&!_.value?(d(),m(t(y),{key:0},{default:l(()=>[s(t(u),{colspan:"4",class:"h-24 text-center text-muted-foreground"},{default:l(()=>e[11]||(e[11]=[n(" No skills found. Start by adding a new skill. ")])),_:1,__:[11]})]),_:1})):B("",!0)]),_:1})]),_:1}))]),_:1})]),_:1})])]),_:1}))}};export{ee as default};
