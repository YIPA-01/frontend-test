import{e as y,g as D,c,w as t,p as F,E as N,o as d,b as o,a,u as s,l as i,d as $,i as V,F as h,k as z,n as B,t as _}from"./main-bV46fZrL.js";import{_ as S}from"./AdminLayout-B17LJOjK.js";import{d as v}from"./useToast-DWOfxrPi.js";import{_ as j}from"./Card-KZt20eCW.js";import{_ as A,a as L}from"./CardTitle-zetJ0R2c.js";import{_ as R}from"./CardContent-kEdadPDo.js";import{_ as E,a as U,b as p,c as f,d as I,e as u}from"./TableCell-B42LXk4T.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"container py-6"},q={key:0,class:"flex justify-center py-8"},G={class:"font-medium"},H={class:"text-sm text-muted-foreground"},J={class:"max-w-md"},K={class:"truncate text-sm"},O={class:"text-sm text-muted-foreground"},P={class:"flex items-center justify-end gap-2"},le={__name:"Index",setup(Q){const k=N(),g=F(),m=y(!1),r=y([]),w=async()=>{m.value=!0;try{const n=await g.get("/admin/messages");r.value=n.data}catch(n){console.error("Failed to load messages:",n)}finally{m.value=!1}},C=async n=>{if(confirm("Are you sure you want to delete this message?"))try{await g.delete(`/admin/messages/${n}`),r.value=r.value.filter(e=>e.id!==n)}catch(e){console.error("Failed to delete message:",e)}},M=async n=>{try{await g.put(`/admin/messages/${n.id}/toggle-read`);const e=r.value.findIndex(l=>l.id===n.id);e!==-1&&(r.value[e]={...r.value[e],is_read:!r.value[e].is_read})}catch(e){console.error("Failed to toggle message read status:",e)}},b=n=>new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return D(()=>{w()}),(n,e)=>(d(),c(S,null,{header:t(()=>e[0]||(e[0]=[o("div",{class:"flex items-center justify-between"},[o("h2",{class:"text-xl font-semibold text-foreground"},"Messages Management")],-1)])),default:t(()=>[o("div",T,[a(s(j),null,{default:t(()=>[a(s(A),null,{default:t(()=>[a(s(L),null,{default:t(()=>e[1]||(e[1]=[i("Messages")])),_:1,__:[1]})]),_:1}),a(s(R),null,{default:t(()=>[m.value?(d(),$("div",q,e[2]||(e[2]=[o("div",{class:"text-sm text-muted-foreground"},"Loading messages...",-1)]))):(d(),c(s(E),{key:1},{default:t(()=>[a(s(U),null,{default:t(()=>[a(s(p),null,{default:t(()=>[a(s(f),null,{default:t(()=>e[3]||(e[3]=[i("Status")])),_:1,__:[3]}),a(s(f),null,{default:t(()=>e[4]||(e[4]=[i("From")])),_:1,__:[4]}),a(s(f),null,{default:t(()=>e[5]||(e[5]=[i("Message")])),_:1,__:[5]}),a(s(f),null,{default:t(()=>e[6]||(e[6]=[i("Date")])),_:1,__:[6]}),a(s(f),{class:"text-right"},{default:t(()=>e[7]||(e[7]=[i("Actions")])),_:1,__:[7]})]),_:1})]),_:1}),a(s(I),null,{default:t(()=>[(d(!0),$(h,null,z(r.value,l=>(d(),c(s(p),{key:l.id,class:B({"bg-muted/50":!l.is_read})},{default:t(()=>[a(s(u),null,{default:t(()=>[a(s(v),{size:"sm",variant:l.is_read?"ghost":"outline",onClick:x=>M(l)},{default:t(()=>[i(_(l.is_read?"Read":"Unread"),1)]),_:2},1032,["variant","onClick"])]),_:2},1024),a(s(u),null,{default:t(()=>[o("div",null,[o("div",G,_(l.name),1),o("div",H,_(l.email),1)])]),_:2},1024),a(s(u),null,{default:t(()=>[o("div",J,[o("p",K,_(l.content),1)])]),_:2},1024),a(s(u),null,{default:t(()=>[o("div",O,_(b(l.created_at)),1)]),_:2},1024),a(s(u),{class:"text-right"},{default:t(()=>[o("div",P,[a(s(v),{variant:"ghost",size:"sm",onClick:x=>s(k).push(`/admin/messages/${l.id}`)},{default:t(()=>e[8]||(e[8]=[i(" View ")])),_:2,__:[8]},1032,["onClick"]),a(s(v),{variant:"destructive",size:"sm",onClick:x=>C(l.id)},{default:t(()=>e[9]||(e[9]=[i(" Delete ")])),_:2,__:[9]},1032,["onClick"])])]),_:2},1024)]),_:2},1032,["class"]))),128)),r.value.length===0&&!m.value?(d(),c(s(p),{key:0},{default:t(()=>[a(s(u),{colspan:"5",class:"h-24 text-center text-muted-foreground"},{default:t(()=>e[10]||(e[10]=[i(" No messages found. ")])),_:1,__:[10]})]),_:1})):V("",!0)]),_:1})]),_:1}))]),_:1})]),_:1})])]),_:1}))}};export{le as default};
