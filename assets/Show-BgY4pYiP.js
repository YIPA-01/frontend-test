import{e as g,g as b,c as _,w as a,p as M,A,B as R,o as m,b as s,d as B,u as o,a as l,l as r,t as i}from"./main-MNcEe9nS.js";import{_ as C}from"./AdminLayout-BX8Pjj0M.js";import{b as d}from"./useToast-D-yC0XMS.js";import{_ as v}from"./Card-CGGVAz6J.js";import{_ as D,a as j}from"./CardTitle-CvEajrma.js";import{_ as p}from"./CardContent-DjNJdOrj.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const S={class:"flex items-center justify-between"},V={class:"container py-6"},F={key:0,class:"flex justify-center py-8"},N={class:"flex items-start justify-between"},U={class:"text-sm text-muted-foreground mt-1"},E={class:"text-xs text-muted-foreground mt-1"},L={class:"flex items-center gap-2"},T={class:"space-y-4"},z={class:"bg-muted/50 p-4 rounded-lg"},H={class:"whitespace-pre-wrap text-sm"},I={class:"flex items-center gap-2 pt-4 border-t"},Y={class:"text-center text-muted-foreground"},X={__name:"Show",setup(q){const y=A(),u=R(),c=M(),f=g(!1),t=g(null),x=async()=>{f.value=!0;try{const n=await c.get(`/admin/messages/${y.params.id}`);t.value=n.data}catch(n){console.error("Failed to load message:",n),u.push("/admin/messages")}finally{f.value=!1}},k=async()=>{if(confirm("Are you sure you want to delete this message?"))try{await c.delete(`/admin/messages/${t.value.id}`),u.push("/admin/messages")}catch(n){console.error("Failed to delete message:",n)}},$=async()=>{try{await c.put(`/admin/messages/${t.value.id}/toggle-read`),t.value={...t.value,is_read:!t.value.is_read}}catch(n){console.error("Failed to toggle message read status:",n)}},h=n=>new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return b(()=>{x()}),(n,e)=>(m(),_(C,null,{header:a(()=>[s("div",S,[e[3]||(e[3]=s("h2",{class:"text-xl font-semibold text-foreground"},"View Message",-1)),l(o(d),{variant:"outline",onClick:e[0]||(e[0]=w=>o(u).push("/admin/messages"))},{default:a(()=>e[2]||(e[2]=[r(" Back to Messages ")])),_:1,__:[2]})])]),default:a(()=>[s("div",V,[f.value?(m(),B("div",F,e[4]||(e[4]=[s("div",{class:"text-sm text-muted-foreground"},"Loading message...",-1)]))):t.value?(m(),_(o(v),{key:1},{default:a(()=>[l(o(D),null,{default:a(()=>[s("div",N,[s("div",null,[l(o(j),{class:"text-lg"},{default:a(()=>[r(i(t.value.name),1)]),_:1}),s("p",U,i(t.value.email),1),s("p",E," Received on "+i(h(t.value.created_at)),1)]),s("div",L,[l(o(d),{size:"sm",variant:t.value.is_read?"ghost":"outline",onClick:$},{default:a(()=>[r(i(t.value.is_read?"Mark as Unread":"Mark as Read"),1)]),_:1},8,["variant"])])])]),_:1}),l(o(p),null,{default:a(()=>[s("div",T,[s("div",null,[e[5]||(e[5]=s("h3",{class:"text-sm font-medium text-muted-foreground mb-2"},"Message:",-1)),s("div",z,[s("p",H,i(t.value.content),1)])]),s("div",I,[l(o(d),{variant:"outline",href:`mailto:${t.value.email}?subject=Re: Your message&body=Hi ${t.value.name},%0A%0AThank you for your message:%0A%0A${encodeURIComponent(t.value.content)}%0A%0A`,target:"_blank"},{default:a(()=>e[6]||(e[6]=[r(" Reply via Email ")])),_:1,__:[6]},8,["href"]),l(o(d),{variant:"destructive",onClick:k},{default:a(()=>e[7]||(e[7]=[r(" Delete Message ")])),_:1,__:[7]})])])]),_:1})]),_:1})):(m(),_(o(v),{key:2},{default:a(()=>[l(o(p),{class:"py-8"},{default:a(()=>[s("div",Y,[e[9]||(e[9]=s("p",null,"Message not found.",-1)),l(o(d),{variant:"outline",class:"mt-4",onClick:e[1]||(e[1]=w=>o(u).push("/admin/messages"))},{default:a(()=>e[8]||(e[8]=[r(" Back to Messages ")])),_:1,__:[8]})])]),_:1})]),_:1}))])]),_:1}))}};export{X as default};
