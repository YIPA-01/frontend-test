import{z as x,A as q,e as v,c as B,w as _,B as C,o as y,d as N,i as R,b as l,u as r,t as U,m as $,a,n as h,l as z}from"./main-MNcEe9nS.js";import{G as A}from"./GuestLayout-gcLZqd7J.js";import{_ as n,a as i,b as d}from"./InputError-szRhSMor.js";import{P as E}from"./PrimaryButton-BhyUOMaX.js";import"./useToast-D-yC0XMS.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const G={key:0,class:"mb-4 text-sm font-medium text-red-600"},S={class:"mt-4"},j={class:"mt-4"},D={class:"mt-4 flex items-center justify-end"},J={__name:"ResetPassword",setup(L){const c=q(),V=C(),{resetPassword:g,loading:p,error:f}=x(),k=c.query.token||"",b=c.query.email||"",s=v({token:k,email:b,password:"",password_confirmation:""}),t=v({}),P=async()=>{var u,e,o,w;t.value={};try{await g(s.value.token,s.value.email,s.value.password,s.value.password_confirmation),V.push({name:"login",query:{status:"Password reset successfully! You can now log in."}})}catch(m){s.value.password="",s.value.password_confirmation="",(e=(u=m.response)==null?void 0:u.data)!=null&&e.errors?t.value=m.response.data.errors:t.value.general=((w=(o=m.response)==null?void 0:o.data)==null?void 0:w.message)||"Password reset failed"}};return(u,e)=>(y(),B(A,null,{default:_(()=>[r(f)?(y(),N("div",G,U(r(f)),1)):R("",!0),l("form",{onSubmit:$(P,["prevent"])},[l("div",null,[a(n,{for:"email",value:"Email"}),a(i,{id:"email",type:"email",class:"mt-1 block w-full",modelValue:s.value.email,"onUpdate:modelValue":e[0]||(e[0]=o=>s.value.email=o),required:"",autofocus:"",autocomplete:"username"},null,8,["modelValue"]),a(d,{class:"mt-2",message:t.value.email},null,8,["message"])]),l("div",S,[a(n,{for:"password",value:"Password"}),a(i,{id:"password",type:"password",class:"mt-1 block w-full",modelValue:s.value.password,"onUpdate:modelValue":e[1]||(e[1]=o=>s.value.password=o),required:"",autocomplete:"new-password"},null,8,["modelValue"]),a(d,{class:"mt-2",message:t.value.password},null,8,["message"])]),l("div",j,[a(n,{for:"password_confirmation",value:"Confirm Password"}),a(i,{id:"password_confirmation",type:"password",class:"mt-1 block w-full",modelValue:s.value.password_confirmation,"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.password_confirmation=o),required:"",autocomplete:"new-password"},null,8,["modelValue"]),a(d,{class:"mt-2",message:t.value.password_confirmation},null,8,["message"])]),l("div",D,[a(E,{class:h({"opacity-25":r(p)}),disabled:r(p)},{default:_(()=>e[3]||(e[3]=[z(" Reset Password ")])),_:1,__:[3]},8,["class","disabled"])])],32)]),_:1}))}};export{J as default};
